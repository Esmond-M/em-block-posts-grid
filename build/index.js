(()=>{var t,e={966:(t,e,o)=>{"use strict";const r=window.wp.blocks,s=window.lodash;var n=o(942),i=o.n(n);const l=window.wp.element,a=window.wp.components,c=window.wp.apiFetch;var d=o.n(c);const p=window.wp.url,u=window.wp.i18n,g=window.wp.date,h=window.wp.blockEditor,_=window.wp.data,m=window.ReactJSXRuntime,w={per_page:-1};class x extends l.Component{constructor(){super(...arguments),this.state={categoriesList:[]}}componentDidMount(){this.isStillMounted=!0,this.fetchRequest=d()({path:(0,p.addQueryArgs)("/wp/v2/categories",w)}).then((t=>{this.isStillMounted&&this.setState({categoriesList:t})})).catch((()=>{this.isStillMounted&&this.setState({categoriesList:[]})}))}componentWillUnmount(){this.isStillMounted=!1}render(){const{attributes:t,setAttributes:e,latestPosts:o}=this.props,{categoriesList:r}=this.state,{displayPostContentRadio:s,displayPostContent:n,displayPostDate:c,postLayout:d,columns:p,order:_,orderBy:w,categories:x,postsToShow:f,excerptLength:y}=t,v=(0,m.jsxs)(h.InspectorControls,{children:[(0,m.jsxs)(a.PanelBody,{title:(0,u.__)("Post content settings"),children:[(0,m.jsx)(a.ToggleControl,{label:(0,u.__)("Post Content"),checked:n,onChange:t=>e({displayPostContent:t})}),n&&(0,m.jsx)(a.RadioControl,{label:(0,u.__)("Show:"),selected:s,options:[{label:(0,u.__)("Excerpt"),value:"excerpt"},{label:(0,u.__)("Full Post"),value:"full_post"}],onChange:t=>e({displayPostContentRadio:t})}),n&&"excerpt"===s&&(0,m.jsx)(a.RangeControl,{label:(0,u.__)("Max number of words in excerpt"),value:y,onChange:t=>e({excerptLength:t}),min:10,max:100})]}),(0,m.jsx)(a.PanelBody,{title:(0,u.__)("Post meta settings"),children:(0,m.jsx)(a.ToggleControl,{label:(0,u.__)("Display post date"),checked:c,onChange:t=>e({displayPostDate:t})})}),(0,m.jsxs)(a.PanelBody,{title:(0,u.__)("Sorting and filtering"),children:[(0,m.jsx)(a.QueryControls,{order:_,orderBy:w,numberOfItems:f,categoriesList:r,selectedCategoryId:x,onOrderChange:t=>e({order:t}),onOrderByChange:t=>e({orderBy:t}),onCategoryChange:t=>e({categories:""!==t?t:void 0}),onNumberOfItemsChange:t=>e({postsToShow:t})}),"grid"===d&&(0,m.jsx)(a.RangeControl,{label:(0,u.__)("Columns"),value:p,onChange:t=>e({columns:t}),min:2,max:b?Math.min(6,o.length):6,required:!0})]})]}),b=Array.isArray(o)&&o.length;if(!b)return(0,m.jsxs)(m.Fragment,{children:[v,(0,m.jsx)(a.Placeholder,{icon:"admin-post",label:(0,u.__)("Latest Posts"),children:Array.isArray(o)?(0,u.__)("No posts found."):(0,m.jsx)(a.Spinner,{})})]});const j=o.length>f?o.slice(0,f):o,C=[{icon:"list-view",title:(0,u.__)("List view"),onClick:()=>e({postLayout:"list"}),isActive:"list"===d},{icon:"grid-view",title:(0,u.__)("Grid view"),onClick:()=>e({postLayout:"grid"}),isActive:"grid"===d}],k=(0,g.__experimentalGetSettings)().formats.date;return console.log(j),(0,m.jsxs)(m.Fragment,{children:[v,(0,m.jsx)(h.BlockControls,{children:(0,m.jsx)(a.ToolbarGroup,{controls:C})}),(0,m.jsx)("ul",{className:i()(this.props.className,{"wp-block-latest-posts__list":!0,"is-grid":"grid"===d,"has-dates":c,[`columns-${p}`]:"grid"===d}),children:j.map(((t,e)=>{const o=t.title.rendered.trim();let r=t.excerpt.rendered;""===t.excerpt.raw&&(r=t.content.raw);const i=document.createElement("div");return i.innerHTML=r,r=i.textContent||i.innerText||"",(0,m.jsxs)("li",{children:[(0,m.jsx)("img",{src:t.fimg_url}),(0,m.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer noopener",children:o?(0,m.jsx)(l.RawHTML,{children:o}):(0,u.__)("(no title)")}),c&&t.date_gmt&&(0,m.jsx)("time",{dateTime:(0,g.format)("c",t.date_gmt),className:"wp-block-latest-posts__post-date",children:(0,g.dateI18n)(k,t.date_gmt)}),n&&"excerpt"===s&&(0,m.jsx)("div",{className:"wp-block-latest-posts__post-excerpt",children:(0,m.jsx)(l.RawHTML,{children:y<r.trim().split(" ").length?r.trim().split(" ",y).join(" ")+" ... <a href="+t.link+'target="_blank" rel="noopener noreferrer">'+(0,u.__)("Read more")+"</a>":r.trim().split(" ",y).join(" ")},"html")}),n&&"full_post"===s&&(0,m.jsx)("div",{className:"wp-block-latest-posts__post-full-content",children:(0,m.jsx)(l.RawHTML,{children:t.content.raw.trim()},"html")})]},e)}))})]})}}const f=(0,_.withSelect)(((t,e)=>{const{postsToShow:o,order:r,orderBy:n,categories:i}=e.attributes,{getEntityRecords:l}=t("core");return{latestPosts:l("postType","post",(0,s.pickBy)({categories:i,order:r,orderby:n,per_page:o},(t=>!(0,s.isUndefined)(t))))}}))(x),y=JSON.parse('{"UU":"em-block-posts-grid/em-block-posts-grid"}'),v=window.wp.primitives;v.SVG,v.Path,(0,r.registerBlockType)(y.UU,{edit:f}),(0,u.__)("Latest Posts"),(0,u.__)("Display a list of your most recent posts."),(0,u.__)("recent posts"),edit},942:(t,e)=>{var o;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var t="",e=0;e<arguments.length;e++){var o=arguments[e];o&&(t=i(t,n(o)))}return t}function n(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return s.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var o in t)r.call(t,o)&&t[o]&&(e=i(e,o));return e}function i(t,e){return e?t?t+" "+e:t+e:t}t.exports?(s.default=s,t.exports=s):void 0===(o=function(){return s}.apply(e,[]))||(t.exports=o)}()}},o={};function r(t){var s=o[t];if(void 0!==s)return s.exports;var n=o[t]={exports:{}};return e[t](n,n.exports,r),n.exports}r.m=e,t=[],r.O=(e,o,s,n)=>{if(!o){var i=1/0;for(d=0;d<t.length;d++){for(var[o,s,n]=t[d],l=!0,a=0;a<o.length;a++)(!1&n||i>=n)&&Object.keys(r.O).every((t=>r.O[t](o[a])))?o.splice(a--,1):(l=!1,n<i&&(i=n));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,s,n]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={57:0,350:0};r.O.j=e=>0===t[e];var e=(e,o)=>{var s,n,[i,l,a]=o,c=0;if(i.some((e=>0!==t[e]))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(a)var d=a(r)}for(e&&e(o);c<i.length;c++)n=i[c],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(d)},o=globalThis.webpackChunkem_block_posts_grid=globalThis.webpackChunkem_block_posts_grid||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var s=r.O(void 0,[350],(()=>r(966)));s=r.O(s)})();